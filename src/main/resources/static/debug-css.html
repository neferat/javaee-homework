<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSSåŠ è½½æµ‹è¯•</title>
    <link rel="stylesheet" href="/css/enhanced-index.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ CSSåŠ è½½è°ƒè¯•</h1>
    
    <div class="test-section">
        <h3>CSSæ ·å¼æµ‹è¯•</h3>
        
        <!-- æµ‹è¯•modal-comment-textæ ·å¼ -->
        <div class="test-item">
            <h4>æµ‹è¯• .modal-comment-text æ ·å¼ï¼š</h4>
            <div class="modal-comment-text">
                è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œç”¨æ¥éªŒè¯ modal-comment-text æ ·å¼æ˜¯å¦ç”Ÿæ•ˆã€‚
                å¦‚æœè¿™æ®µæ–‡å­—æ˜¯é»‘è‰²çš„ï¼Œè¯´æ˜CSSæ ·å¼å·²ç»æ­£ç¡®åŠ è½½ã€‚
            </div>
        </div>
        
        <!-- æµ‹è¯•modal-comment-textareaæ ·å¼ -->
        <div class="test-item">
            <h4>æµ‹è¯• .modal-comment-textarea æ ·å¼ï¼š</h4>
            <textarea class="modal-comment-textarea" placeholder="è¾“å…¥æµ‹è¯•å†…å®¹...">æµ‹è¯•æ–‡æœ¬å†…å®¹</textarea>
        </div>
        
        <!-- æµ‹è¯•comments-listæ ·å¼ -->
        <div class="test-item">
            <h4>æµ‹è¯• .comments-list æ ·å¼ï¼š</h4>
            <div class="comments-list">
                <div class="comment-item">
                    <div class="comment-content">
                        <div class="comment-text">æµ‹è¯•è¯„è®ºå†…å®¹ 1</div>
                    </div>
                </div>
                <div class="comment-item">
                    <div class="comment-content">
                        <div class="comment-text">æµ‹è¯•è¯„è®ºå†…å®¹ 2</div>
                    </div>
                </div>
                <div class="comment-item">
                    <div class="comment-content">
                        <div class="comment-text">æµ‹è¯•è¯„è®ºå†…å®¹ 3</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>CSSåŠ è½½æ£€æµ‹</h3>
        <div id="cssTest"></div>
    </div>

    <script>
        // æ£€æµ‹CSSæ˜¯å¦åŠ è½½
        function testCSSLoading() {
            const testDiv = document.getElementById('cssTest');
            
            // åˆ›å»ºæµ‹è¯•å…ƒç´ 
            const testElement = document.createElement('div');
            testElement.className = 'modal-comment-text';
            testElement.style.position = 'absolute';
            testElement.style.left = '-9999px';
            testElement.textContent = 'test';
            document.body.appendChild(testElement);
            
            // è·å–è®¡ç®—æ ·å¼
            const computedStyle = window.getComputedStyle(testElement);
            const color = computedStyle.color;
            const display = computedStyle.display;
            const visibility = computedStyle.visibility;
            
            // ç§»é™¤æµ‹è¯•å…ƒç´ 
            document.body.removeChild(testElement);
            
            // æ˜¾ç¤ºç»“æœ
            let results = [];
            
            if (color === 'rgb(0, 0, 0)' || color === '#000000') {
                results.push('<div class="test-item success">âœ… modal-comment-text é¢œè‰²æ­£ç¡® (black)</div>');
            } else {
                results.push(`<div class="test-item error">âŒ modal-comment-text é¢œè‰²é”™è¯¯: ${color}</div>`);
            }
            
            if (display === 'block') {
                results.push('<div class="test-item success">âœ… modal-comment-text displayæ­£ç¡® (block)</div>');
            } else {
                results.push(`<div class="test-item error">âŒ modal-comment-text displayé”™è¯¯: ${display}</div>`);
            }
            
            if (visibility === 'visible') {
                results.push('<div class="test-item success">âœ… modal-comment-text visibilityæ­£ç¡® (visible)</div>');
            } else {
                results.push(`<div class="test-item error">âŒ modal-comment-text visibilityé”™è¯¯: ${visibility}</div>`);
            }
            
            testDiv.innerHTML = results.join('');
        }
        
        // æ£€æµ‹CSSæ–‡ä»¶æ˜¯å¦åŠ è½½
        function checkCSSFile() {
            const links = document.getElementsByTagName('link');
            let cssLoaded = false;
            
            for (let link of links) {
                if (link.href && link.href.includes('enhanced-index.css')) {
                    cssLoaded = true;
                    console.log('CSSæ–‡ä»¶é“¾æ¥:', link.href);
                    console.log('CSSæ–‡ä»¶çŠ¶æ€:', link.sheet ? 'å·²åŠ è½½' : 'æœªåŠ è½½');
                    break;
                }
            }
            
            if (!cssLoaded) {
                document.getElementById('cssTest').innerHTML += 
                    '<div class="test-item error">âŒ enhanced-index.css æ–‡ä»¶æœªæ‰¾åˆ°</div>';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                testCSSLoading();
                checkCSSFile();
            }, 100);
        });
        
        // æ·»åŠ å¼ºåˆ¶åˆ·æ–°CSSçš„åŠŸèƒ½
        function forceCSSRefresh() {
            const links = document.getElementsByTagName('link');
            for (let link of links) {
                if (link.href && link.href.includes('enhanced-index.css')) {
                    const href = link.href;
                    link.href = href + '?v=' + new Date().getTime();
                    console.log('å¼ºåˆ¶åˆ·æ–°CSS:', link.href);
                    
                    // ç­‰å¾…CSSé‡æ–°åŠ è½½åé‡æ–°æµ‹è¯•
                    setTimeout(() => {
                        testCSSLoading();
                    }, 500);
                    break;
                }
            }
        }
        
        console.log('CSSè°ƒè¯•é¡µé¢åŠ è½½å®Œæˆ');
    </script>
    
    <div class="test-section">
        <button onclick="forceCSSRefresh()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            å¼ºåˆ¶åˆ·æ–°CSSç¼“å­˜
        </button>
    </div>
</body>
</html> 